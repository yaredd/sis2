<h1>Entering <%= Period.current_grading_period %> Grade</h1>
<% if ! params[:schedule_id].nil? %>
  for <%= Schedule.find(params[:schedule_id]).student.fullNameGrade %><br/>
  Course: <%= Schedule.find(params[:schedule_id]).section.course.name %>

  <%= form_for(@grade) do |f| %>
    <% if @grade.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@grade.errors.count, "error") %> prohibited this grade from being saved:</h2>

        <ul>
        <% @grade.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

      <%= f.hidden_field :schedule_id, :value => params[:schedule_id] %>

    <div class="field">
      <%= f.label :mark %><br />
      <%= f.select :mark_id, options_from_collection_for_select(Mark.all, :id, :name), :include_blank => true%>
    </div>
    <div class="field">
      <%= f.label :effort %><br />
      <%= f.select :effort_id, options_from_collection_for_select(Effort.all, :id, :name), :include_blank => true %>
    </div>
    <div class="actions">
      <%= f.submit 'Save', :disable_with => "Saving ..." %>
    </div>
  <% end %>
  <%= link_to "Back", :back %>
<% else %>
  Updating grade failed. Please go <%= link_to "back to grade book", root_url %> and try again
<% end %>

